---
import FrontendMentorLayout from '../layouts/FrontendMentorLayout.astro'
---

<FrontendMentorLayout
  title='Ping coming soon page'
  fontFamily='Libre Franklin'
  fontWeights={[300, 500, 700]}
>
  <div class='wrapper'>
    <header class='header'>
      <img src='./images/logo.svg' alt='Ping logo' class='header__logo' />
    </header>

    <main class='main'>
      <section class='hero'>
        <h1 class='hero__title'>
          We are launching <span class='hero__title--highlight'>soon!</span>
        </h1>

        <p class='hero__text'>Subscribe and get notified</p>

        <form class='form' novalidate>
          <div class='form__group'>
            <input
              type='email'
              placeholder='Your email address...'
              class='form__input'
            />
            <p class='form__error'></p>
          </div>
          <button class='form__button'>Notify Me</button>
        </form>

        <img
          src='./images/illustration-dashboard.png'
          alt='Dashboard illustration'
          class='hero__illustration'
        />
      </section>

      <footer class='footer'>
        <ul class='socials' role='list'>
          <li class='socials__item'>
            <a href='#' class='socials__link'>
              <i class='fa-brands fa-facebook-f'></i>
            </a>
          </li>
          <li class='socials__item'>
            <a href='#' class='socials__link'>
              <i class='fab fa-twitter'></i>
            </a>
          </li>
          <li class='socials__item'>
            <a href='#' class='socials__link'>
              <i class='fab fa-instagram'></i>
            </a>
          </li>
        </ul>

        <p class='copyright'>&copy; Copyright Ping. All rights reserved.</p>
      </footer>
    </main>
  </div>
</FrontendMentorLayout>

<style>
  .header {
    --margin: 4em;
    margin-block: var(--margin) calc(var(--margin) / 2);
  }

  .header__logo {
    margin-inline: auto;
  }

  .hero {
    text-align: center;
  }

  .hero__title {
    font-weight: var(--fw-light);
    font-size: var(--fs-900);
    margin-bottom: 0;
    line-height: 1;
  }

  .hero__title--highlight {
    font-weight: var(--fw-bold);
    color: hsl(var(--clr-neutral-900));
  }

  .hero__text {
    font-weight: var(--fw-regular);
    color: hsl(var(--clr-neutral-900));
  }

  .form {
    display: flex;
    gap: 1em;
    margin-bottom: 4rem;
  }

  .form__group {
    width: 100%;
    position: relative;
  }

  .form__input {
    border: 1px solid hsl(var(--clr-blue-200));
    border-radius: 9999px;
    padding: 0.5em 1.5em;
    font-weight: var(--fw-light);
    width: 100%;
    outline: none;
  }

  .form__input:focus {
    border-color: hsl(var(--clr-blue-400));
  }

  .form__input::placeholder {
    color: hsla(var(--clr-blue-200) / 0.9);
  }

  .form__input--error,
  .form__input--error:focus {
    border-color: hsl(var(--clr-red-200));
  }

  .form__error {
    color: hsl(var(--clr-red-200));
    font-style: italic;
    font-size: 14px;
    top: 100%;
    margin: 0;
    text-align: left;
    padding-left: 1.5em;
  }

  .form__button {
    border: 0;
    border-radius: 9999px;
    background-color: hsl(var(--clr-blue-400));
    color: white;
    padding: 0.5em 1.5em;
    min-width: 14rem;
    box-shadow: 0 25px 20px -20px hsla(var(--clr-blue-400) / 0.5);
    transition: opacity 200ms ease-in;
  }

  .form__button:hover,
  .form__button:focus-visible {
    opacity: 0.8;
  }

  @media (max-width: 50em) {
    .form {
      flex-direction: column;
      height: 150px;
    }
  }

  @media (min-width: 50em) {
    .form {
      margin-bottom: 4em;
    }

    .form__error {
      position: absolute;
    }
  }

  .socials {
    display: flex;
    gap: 1em;
    justify-content: center;
    margin-bottom: 1.5em;
  }

  .socials__link {
    display: grid;
    place-content: center;
    font-size: 16px;
    height: 40px;
    width: 40px;
    border: 1px solid hsl(var(--clr-blue-400));
    border-radius: 9999px;
    color: hsl(var(--clr-blue-400));
    text-decoration: none;
    text-align: center;
    transition: all 300ms ease-in;
  }

  .socials__link:hover,
  .socials__link:focus-visible {
    background-color: hsl(var(--clr-blue-400));
    color: white;
  }

  .copyright {
    font-weight: var(--fw-light);
  }
  .footer {
    text-align: center;
    margin-top: 5em;
  }
</style>

<script>
  const emailInput = document.querySelector('.form__input') as HTMLInputElement
  const error = document.querySelector('.form__error') as HTMLElement

  emailInput?.addEventListener('input', () => {
    if (!validateEmail(emailInput.value)) {
      error.innerText = 'Please provide a valid email address'
      emailInput.classList.add('form__input--error')
    } else {
      error.innerText = ''
      emailInput.classList.remove('form__input--error')
    }
  })

  function validateEmail(email: string) {
    const re =
      /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/

    return re.test(email.toLowerCase())
  }
</script>
